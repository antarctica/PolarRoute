

<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Examples &#8212; polar_route 0.0.10 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bizstyle.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Outputs" href="Outputs.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Outputs.html" title="Outputs"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">polar_route 0.0.10 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Examples</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h1>
<section id="python-ipython-notebooks">
<h2>Python/iPython Notebooks<a class="headerlink" href="#python-ipython-notebooks" title="Permalink to this heading">¶</a></h2>
<p>Inside the folder <cite>./Examples</cite> is an example ipython notebook that can be used for the generation of an example route between two waypoints ‘Halley’ and ‘Rothera’. In this example the processing procedure is split into the three main stages with an outline below showing this use case. All the data required for processing this example can be found at <a class="reference external" href="https://drive.google.com/drive/folders/1EgtNrcXyVQMYPKqce6BNO2GbllAeaJJd?usp=sharing">https://drive.google.com/drive/folders/1EgtNrcXyVQMYPKqce6BNO2GbllAeaJJd?usp=sharing</a>, please place all the files from the link into a folder at <cite>./Examples/Data</cite>.</p>
<section id="configuration-loading">
<h3>Configuration Loading<a class="headerlink" href="#configuration-loading" title="Permalink to this heading">¶</a></h3>
<p>The configuration file is loaded into the codebase. As this file will be appended to throughout the construction of the paths we name the output file <cite>info</cite>. More information can be found in the configuration section of the manual for the construction of this input file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;config.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="discrete-mesh">
<h3>Discrete Mesh<a class="headerlink" href="#discrete-mesh" title="Permalink to this heading">¶</a></h3>
<p>The <cite>info</cite> object is passed to the polar_route software to construct a mesh. Once the mesh is constructed we output the json object, now with the appended mesh info, back out as <cite>info</cite>. More information of the output from this section can be found in the outputs section of the manual pages.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">polar_route.mesh</span> <span class="kn">import</span> <span class="n">Mesh</span>
<span class="n">cg</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
<span class="n">info</span> <span class="o">=</span> <span class="n">cg</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="vehicles-specifics">
<h3>Vehicles Specifics<a class="headerlink" href="#vehicles-specifics" title="Permalink to this heading">¶</a></h3>
<p>The <cite>info</cite> object now with mesh information is used as an input by the vessel performance class. The section of the codebase alters the neighbour graph and appends new derived quantities to the mesh information. This altered object is then output to <cite>info</cite>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">polar_route.vessel_performance</span> <span class="kn">import</span> <span class="n">VesselPerformance</span>
<span class="n">vp</span> <span class="o">=</span> <span class="n">VesselPerformance</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
<span class="n">info</span> <span class="o">=</span> <span class="n">vp</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="route-optimisation">
<h3>Route Optimisation<a class="headerlink" href="#route-optimisation" title="Permalink to this heading">¶</a></h3>
<p>Now that the vessel dependent environmental mesh is defined, and represented in the <cite>info</cite> object, we can construct routes, with parameters defined by the user in the configuration file. The route construction is done in two stages: construction of the meshed dijkstra optimal routes, <cite>.compute_routes()</cite>; and, the smoothing of the dijkstra routes to further optimise the solution and reduce mesh dependencies, <cite>.compute_smooth_routes()</cite>. During <cite>.compute_routes()</cite> the paths are appended to the <cite>info</cite> object as an entry <cite>paths</cite>, which are replaced by the smoothed paths after running <cite>.compute_smooth_routes()</cite>. An additional entry <cite>waypoints</cite> is generated to give the waypoints information used in route construction. For further info about the structure of the outputs of the paths please see the Outputs section of the manual.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">polar_route.route_planner</span> <span class="kn">import</span> <span class="n">RoutePlanner</span>
<span class="n">rp</span> <span class="o">=</span> <span class="n">RoutePlanner</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
<span class="n">rp</span><span class="o">.</span><span class="n">compute_routes</span><span class="p">()</span>
<span class="n">rp</span><span class="o">.</span><span class="n">compute_smoothed_routes</span><span class="p">()</span>
<span class="n">info</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="plotting">
<h3>Plotting<a class="headerlink" href="#plotting" title="Permalink to this heading">¶</a></h3>
<p>To plot the routes constructed and mesh information we use the python package <cite>geoplot</cite>. This is an external package that can be found at <cite>https://github.com/antarctica/GeoPlot</cite>. The code used to plot the above example would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">geoplot.interactive</span> <span class="kn">import</span> <span class="n">Map</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">config</span>    <span class="o">=</span> <span class="n">info_dict</span><span class="p">[</span><span class="s1">&#39;config&#39;</span><span class="p">]</span>
<span class="n">mesh</span>      <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">info_dict</span><span class="p">[</span><span class="s1">&#39;cellboxes&#39;</span><span class="p">])</span>
<span class="n">paths</span>     <span class="o">=</span> <span class="n">info_dict</span><span class="p">[</span><span class="s1">&#39;paths&#39;</span><span class="p">]</span>
<span class="n">waypoints</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">info_dict</span><span class="p">[</span><span class="s1">&#39;waypoints&#39;</span><span class="p">])</span>

<span class="n">mp</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="n">config</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Example Test 1&#39;</span><span class="p">)</span>
<span class="n">mp</span><span class="o">.</span><span class="n">Maps</span><span class="p">(</span><span class="n">mesh</span><span class="p">,</span><span class="s1">&#39;SIC&#39;</span><span class="p">,</span><span class="n">predefined</span><span class="o">=</span><span class="s1">&#39;SIC&#39;</span><span class="p">)</span>
<span class="n">mp</span><span class="o">.</span><span class="n">Maps</span><span class="p">(</span><span class="n">mesh</span><span class="p">,</span><span class="s1">&#39;Extreme Ice&#39;</span><span class="p">,</span><span class="n">predefined</span><span class="o">=</span><span class="s1">&#39;Extreme Sea Ice Conc&#39;</span><span class="p">)</span>
<span class="n">mp</span><span class="o">.</span><span class="n">Maps</span><span class="p">(</span><span class="n">mesh</span><span class="p">,</span><span class="s1">&#39;Land Mask&#39;</span><span class="p">,</span><span class="n">predefined</span><span class="o">=</span><span class="s1">&#39;Land Mask&#39;</span><span class="p">)</span>
<span class="n">mp</span><span class="o">.</span><span class="n">Paths</span><span class="p">(</span><span class="n">paths</span><span class="p">,</span><span class="s1">&#39;Routes&#39;</span><span class="p">,</span><span class="n">predefined</span><span class="o">=</span><span class="s1">&#39;Route Traveltime Paths&#39;</span><span class="p">)</span>
<span class="n">mp</span><span class="o">.</span><span class="n">Points</span><span class="p">(</span><span class="n">waypoints</span><span class="p">,</span><span class="s1">&#39;Waypoints&#39;</span><span class="p">,</span><span class="n">names</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;font_size&quot;</span><span class="p">:</span><span class="mf">10.0</span><span class="p">})</span>
<span class="n">mp</span><span class="o">.</span><span class="n">MeshInfo</span><span class="p">(</span><span class="n">mesh</span><span class="p">,</span><span class="s1">&#39;Mesh Info&#39;</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">mp</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="command-line-execution">
<h2>Command Line Execution<a class="headerlink" href="#command-line-execution" title="Permalink to this heading">¶</a></h2>
<p>In the previous section we outlined how to run the codebase from within a Python file or an iPython notebook. In this section we will outline how the code can be run directly from the command line by passing a configuration file to an executable python file found in <cite>./exec/</cite> from the root directly.</p>
<p>The command line execution</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">./</span><span class="n">exec</span><span class="o">/</span><span class="n">polar_route</span><span class="o">.</span><span class="n">py</span> <span class="n">config</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>In addition, within the exec folder there are executable files for each of the independent stages used within the route planner. These include:</p>
<ul class="simple">
<li><p><cite>mesh.py</cite> - Discrete Meshing</p></li>
<li><p><cite>vessel_performance.py</cite> - Vehicle Specifics applied to pre-computed mesh</p></li>
<li><p><cite>route_planner.py</cite> - Route planning on pre-computed mesh and vehicle specifics.</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Examples</a><ul>
<li><a class="reference internal" href="#python-ipython-notebooks">Python/iPython Notebooks</a><ul>
<li><a class="reference internal" href="#configuration-loading">Configuration Loading</a></li>
<li><a class="reference internal" href="#discrete-mesh">Discrete Mesh</a></li>
<li><a class="reference internal" href="#vehicles-specifics">Vehicles Specifics</a></li>
<li><a class="reference internal" href="#route-optimisation">Route Optimisation</a></li>
<li><a class="reference internal" href="#plotting">Plotting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#command-line-execution">Command Line Execution</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="Outputs.html"
                          title="previous chapter">Outputs</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/sections/Examples.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Outputs.html" title="Outputs"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">polar_route 0.0.10 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Examples</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, BAS AI Lab.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.1.1.
    </div>
  </body>
</html>