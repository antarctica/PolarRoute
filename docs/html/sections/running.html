<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3. Runnning Codebase &mdash; polar_route 0.0.17 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4. Input - Configuration" href="Configuration.html" />
    <link rel="prev" title="2. Installation" href="Installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            polar_route
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Code_structure.html">1. Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">2. Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Runnning Codebase</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#command-line-interface">3.1. Command Line Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-mesh">3.1.1. create_mesh</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-vehicle">3.1.2. add_vehicle</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optimise-routes">3.1.3. optimise_routes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plotting">3.1.4. Plotting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#python-ipython-notebooks">3.2. Python &amp; iPython Notebooks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-the-digital-enviroment">3.2.1. Creating the digital enviroment.</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simulating-a-vessel-in-a-digital-enviroment">3.2.2. Simulating a Vessel in a Digital Enviroment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#route-optimisation">3.2.3. Route Optimisation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Configuration.html">4. Input - Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="Dataloaders/overview.html">5. Dataloader Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="Outputs.html">6. Outputs - Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html">7. Examples of running code</a></li>
<li class="toctree-l1"><a class="reference internal" href="Discrete_meshing.html">8. Methods - Mesh Construction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Vehicle_specifics.html">9. Methods - Vessel Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="Route_optimisation.html">10. Methods - Route Planner</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">polar_route</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">3. </span>Runnning Codebase</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/sections/running.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="runnning-codebase">
<h1><span class="section-number">3. </span>Runnning Codebase<a class="headerlink" href="#runnning-codebase" title="Permalink to this heading"></a></h1>
<p>The codebase current can be run from either pre-defined python functions or via a command line interface. Outlined below is how to run the separate sections of the software package using either of the two methods.</p>
<section id="command-line-interface">
<h2><span class="section-number">3.1. </span>Command Line Interface<a class="headerlink" href="#command-line-interface" title="Permalink to this heading"></a></h2>
<p>The PolarRoute package provides 3 CLI entry points, intended to be used in succession to plan a route through a digital enviroment.</p>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../_images/PolarRoute_CLI.png"><img alt="../_images/PolarRoute_CLI.png" src="../_images/PolarRoute_CLI.png" style="width: 700px;" /></a>
<figcaption>
<p><span class="caption-text"><em>Overview figure of the Command Line Interface entry points of PolarRoute</em></span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<section id="create-mesh">
<h3><span class="section-number">3.1.1. </span>create_mesh<a class="headerlink" href="#create-mesh" title="Permalink to this heading"></a></h3>
<p>The <em>create_mesh</em> entry point builds a digital enviroment file from a collection of source data, which can then be used
by the vessel performance modeller and route planner.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">create_mesh</span> <span class="o">&lt;</span><span class="n">config</span><span class="o">.</span><span class="n">json</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>positional arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="p">:</span> <span class="n">A</span> <span class="n">configuration</span> <span class="n">file</span> <span class="n">detailing</span> <span class="n">how</span> <span class="n">to</span> <span class="n">build</span> <span class="n">the</span> <span class="n">digital</span> <span class="n">enviroment</span><span class="o">.</span> <span class="n">JSON</span> <span class="n">parsable</span>
</pre></div>
</div>
<p>The format of the required <em>&lt;config.json&gt;</em> file can be found in the <a class="reference internal" href="Configuration.html#input-configuration"><span class="std std-ref">Input - Configuration</span></a> section of the documentation.</p>
<p>optional arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">v</span> <span class="p">(</span><span class="n">verbose</span> <span class="n">logging</span><span class="p">)</span>
<span class="o">-</span><span class="n">o</span> <span class="o">&lt;</span><span class="n">output</span> <span class="n">location</span><span class="o">&gt;</span> <span class="p">(</span><span class="nb">set</span> <span class="n">output</span> <span class="n">location</span> <span class="k">for</span> <span class="n">mesh</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="add-vehicle">
<h3><span class="section-number">3.1.2. </span>add_vehicle<a class="headerlink" href="#add-vehicle" title="Permalink to this heading"></a></h3>
<p>The <em>add_vehicle</em> command allows vehicle specific simulations to be performed on the digital enviroment. This vehicle specific
information is then encoded into the digital enviroment file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">add_vehicle</span> <span class="o">&lt;</span><span class="n">vessel</span><span class="o">.</span><span class="n">json</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">mesh</span><span class="o">.</span><span class="n">json</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>positional arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vessel</span> <span class="p">:</span> <span class="n">A</span> <span class="n">configuration</span> <span class="n">file</span> <span class="n">detailing</span> <span class="n">the</span> <span class="n">vessel</span> <span class="n">to</span> <span class="n">be</span> <span class="n">simulated</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">digital</span> <span class="n">enviroment</span><span class="o">.</span>
<span class="n">mesh</span> <span class="p">:</span> <span class="n">A</span> <span class="n">digital</span> <span class="n">enviroment</span> <span class="n">file</span><span class="o">.</span>
</pre></div>
</div>
<p>The format for the required <em>&lt;vessel.json&gt;</em> file can be found in the <a class="reference internal" href="Configuration.html#input-configuration"><span class="std std-ref">Input - Configuration</span></a> section of the documentation.
The required <em>&lt;mesh.json&gt;</em> file can be created using the <a class="reference internal" href="#create-mesh"><span class="std std-ref">create_mesh</span></a> command shown above.</p>
<p>optional arguments are</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">v</span> <span class="p">(</span><span class="n">verbose</span> <span class="n">logging</span><span class="p">)</span>
<span class="o">-</span><span class="n">o</span> <span class="o">&lt;</span><span class="n">output</span> <span class="n">location</span><span class="o">&gt;</span> <span class="p">(</span><span class="nb">set</span> <span class="n">output</span> <span class="n">location</span> <span class="k">for</span> <span class="n">mesh</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="optimise-routes">
<h3><span class="section-number">3.1.3. </span>optimise_routes<a class="headerlink" href="#optimise-routes" title="Permalink to this heading"></a></h3>
<p>Optimal routes through a mesh can be calculated using the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">optimise_routes</span> <span class="o">&lt;</span><span class="n">vessel_mesh</span><span class="o">.</span><span class="n">json</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">route_config</span><span class="o">.</span><span class="n">json</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">waypoints</span><span class="o">.</span><span class="n">csv</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>positional parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vessel_mesh</span> <span class="p">:</span> <span class="n">A</span> <span class="n">digital</span> <span class="n">enviroment</span> <span class="n">file</span> <span class="k">with</span> <span class="n">added</span> <span class="n">vessel</span> <span class="n">specific</span> <span class="n">simulations</span><span class="o">.</span>
<span class="n">route_config</span> <span class="p">:</span> <span class="n">A</span> <span class="n">configuration</span> <span class="n">file</span> <span class="n">detailing</span> <span class="n">optimisation</span> <span class="n">parameters</span> <span class="n">to</span> <span class="n">be</span> <span class="n">used</span> <span class="n">when</span> <span class="n">route</span> <span class="n">planning</span><span class="o">.</span>
<span class="n">waypoints</span><span class="p">:</span> <span class="n">A</span> <span class="o">.</span><span class="n">csv</span> <span class="n">file</span> <span class="n">containing</span> <span class="n">waypoints</span> <span class="n">to</span> <span class="n">be</span> <span class="n">travelled</span> <span class="n">between</span><span class="o">.</span>
</pre></div>
</div>
<p>The format for the required <em>&lt;route_config.json&gt;</em> file can be found in the <a class="reference internal" href="Configuration.html#input-configuration"><span class="std std-ref">Input - Configuration</span></a> section of the documentation.
The required <em>&lt;vessel_mesh.json&gt;</em> file can be generated using the <a class="reference internal" href="#add-vehicle"><span class="std std-ref">add_vehicle</span></a> command shown above.
The format for the requried <em>&lt;waypoints.csv&gt;</em> file is as follows:</p>
<p>As table:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Lat</p></th>
<th class="head"><p>Long</p></th>
<th class="head"><p>Source</p></th>
<th class="head"><p>Destination</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Halley</p></td>
<td><p>-75.26722</p></td>
<td><p>-27.21694</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>Rothera</p></td>
<td><p>-68.3892</p></td>
<td><p>-95.2436</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>South Georiga</p></td>
<td><p>-54.87916667</p></td>
<td><p>-37.26416667</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Falklands</p></td>
<td><p>-55.63472222</p></td>
<td><p>-64.88</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Elephant Island</p></td>
<td><p>-60.54722222</p></td>
<td><p>-55.18138889</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>As .csv:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Name</span><span class="p">,</span><span class="n">Lat</span><span class="p">,</span><span class="n">Long</span><span class="p">,</span><span class="n">Source</span><span class="p">,</span><span class="n">Destination</span>
<span class="n">Halley</span><span class="p">,</span><span class="o">-</span><span class="mf">75.26722</span><span class="p">,</span><span class="o">-</span><span class="mf">27.21694</span><span class="p">,,</span><span class="n">X</span>
<span class="n">Rothera</span><span class="p">,</span><span class="o">-</span><span class="mf">68.3892</span><span class="p">,</span><span class="o">-</span><span class="mf">95.2436</span><span class="p">,,</span>
<span class="n">South</span> <span class="n">Georiga</span><span class="p">,</span><span class="o">-</span><span class="mf">54.87916667</span><span class="p">,</span><span class="o">-</span><span class="mf">37.26416667</span><span class="p">,</span><span class="n">X</span><span class="p">,</span>
<span class="n">Falklands</span><span class="p">,</span><span class="o">-</span><span class="mf">55.63472222</span><span class="p">,</span><span class="o">-</span><span class="mf">64.88</span><span class="p">,,</span>
<span class="n">Elephant</span> <span class="n">Island</span><span class="p">,</span><span class="o">-</span><span class="mf">60.54722222</span><span class="p">,</span><span class="o">-</span><span class="mf">55.18138889</span><span class="p">,,</span>
</pre></div>
</div>
<p>Additional waypoints may be added by extending the ‘&lt;waypoints.csv&gt;’ file. Which waypoints are navigated between is determined by
added a <strong>X</strong> in either the <em>Source</em> or <em>Destination</em> columns. When processed, the route planner will create routes from all
waypoints marked with an <strong>X</strong> in the source column to all waypoints marked with a <strong>X</strong> in the <em>destination</em> column.</p>
<p>optional arguments are</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">v</span> <span class="p">(</span><span class="n">verbose</span> <span class="n">logging</span><span class="p">)</span>
<span class="o">-</span><span class="n">o</span> <span class="o">&lt;</span><span class="n">output</span> <span class="n">location</span><span class="o">&gt;</span> <span class="p">(</span><span class="nb">set</span> <span class="n">output</span> <span class="n">location</span> <span class="k">for</span> <span class="n">mesh</span><span class="p">)</span>
<span class="o">-</span><span class="n">p</span> <span class="p">(</span><span class="n">output</span> <span class="n">only</span> <span class="n">the</span> <span class="n">caculated</span> <span class="n">path</span><span class="p">,</span> <span class="ow">not</span> <span class="n">the</span> <span class="n">entire</span> <span class="n">mesh</span>
<span class="o">-</span><span class="n">d</span> <span class="p">(</span><span class="n">output</span> <span class="n">Dijkstra</span> <span class="n">path</span> <span class="k">as</span> <span class="n">well</span> <span class="k">as</span> <span class="n">smoothed</span> <span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="plotting">
<h3><span class="section-number">3.1.4. </span>Plotting<a class="headerlink" href="#plotting" title="Permalink to this heading"></a></h3>
<p>Meshes produced at any stage in the route planning process can be visualised using the GeoPlot library found at <cite>Link &lt;https://github.com/antarctica/GeoPlot&gt;</cite></p>
</section>
</section>
<section id="python-ipython-notebooks">
<h2><span class="section-number">3.2. </span>Python &amp; iPython Notebooks<a class="headerlink" href="#python-ipython-notebooks" title="Permalink to this heading"></a></h2>
<p>Route planning may also be done using a python terminal. This is case, the CLI is not required but the steps required for route planning
follow the same format - create a digital enviroment; simulated a vessel against it; optimise a route plan through the digital enviroment.</p>
<section id="creating-the-digital-enviroment">
<h3><span class="section-number">3.2.1. </span>Creating the digital enviroment.<a class="headerlink" href="#creating-the-digital-enviroment" title="Permalink to this heading"></a></h3>
<p>A configuration file is needed to initialise the <strong>`Mesh`</strong> object which forms the digital enviroment. This configuration file
is of the same format used in the <a class="reference internal" href="#create-mesh"><span class="std std-ref">create_mesh</span></a> CLI entry-point, and may either be loaded from a <em>json</em> file or constructed
within the python terminal.</p>
<p>Loading configuration from <em>json</em> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;config.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>The digital enviroment <strong>`Mesh`</strong> object can then be initialised. This mesh object will be constructed using parameters in it
configuration file. This mesh object can be manipulated further, such as increasing its resolution through further
splitting, adding additional data sources or altering is configuration parameters using functions listed in
the <a class="reference internal" href="Discrete_meshing.html#methods-mesh-construction"><span class="std std-ref">Methods - Mesh Construction</span></a> section of the documentation.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">polar_route.mesh</span> <span class="kn">import</span> <span class="n">Mesh</span>
<span class="n">cg</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
<p>The digital enviroment <strong>`Mesh`</strong> object can then be cast to a json object and saved to a file. This <em>mesh.json</em> file can then
be used by the CLI entry-point <a class="reference internal" href="#add-vehicle"><span class="std std-ref">add_vehicle</span></a>, or the json object can be passed to the <strong>`VesselPerformance`</strong> object in a python
terminal.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mesh</span> <span class="o">=</span> <span class="n">cg</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;mesh.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">mesh</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="simulating-a-vessel-in-a-digital-enviroment">
<h3><span class="section-number">3.2.2. </span>Simulating a Vessel in a Digital Enviroment<a class="headerlink" href="#simulating-a-vessel-in-a-digital-enviroment" title="Permalink to this heading"></a></h3>
<p>Once a digital enviroment <strong>`Mesh`</strong> object has been created, how a vessel interacts with it may be simulated. The <strong>`VesselPerformance`</strong>
object requires a digital enviroment in <em>json</em> format and vessel specific configuration parameters, also in <em>json</em> format. These may either
be loaded from a file, or created within the python terminal.</p>
<p>Loading mesh and vessel from <em>json</em> files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="c1"># Loading digital enviroment from file</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;mesh.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">mesh</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="c1"># Loading vessel configuration parameters from file</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;vessel.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">vessel</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>The <strong>`VesselPerformance`</strong> object can then be initialised. This will simulate the performance of the vessel and encodes this information
into the digital enviroment.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">polar_route.vessel_performance</span> <span class="kn">import</span> <span class="n">VesselPerformance</span>
<span class="n">vp</span> <span class="o">=</span> <span class="n">VesselPerformance</span><span class="p">(</span><span class="n">mesh</span><span class="p">,</span> <span class="n">vessel</span><span class="p">)</span>
</pre></div>
</div>
<p>The <strong>`VesselPerformance`</strong> object can then be cast to a json object and saved to a file. This <em>vessel_mesh.json</em> file can then
be used by the CLI entry-point <a class="reference internal" href="#optimise-routes"><span class="std std-ref">optimise_routes</span></a>, or the json object can be passed to the <strong>`RoutePlanner`</strong> object in a python
terminal.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vessel_mesh</span> <span class="o">=</span> <span class="n">vp</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;vessel_mesh.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">vessel_mesh</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="route-optimisation">
<h3><span class="section-number">3.2.3. </span>Route Optimisation<a class="headerlink" href="#route-optimisation" title="Permalink to this heading"></a></h3>
<p>Now that the vessel dependent environmental mesh is defined, and represented in the <cite>vessel_performance</cite> object, we can
construct routes, with parameters defined by the user in the configuration file. Waypoints are passed as an input
file path, <cite>waypoints.csv</cite>, discussed more in the Inputs section of the manual pages.  The route construction is done
in two stages: construction of the meshed dijkstra optimal routes, <cite>.compute_routes()</cite>; and, the smoothing of the
dijkstra routes to further optimise the solution and reduce mesh dependencies, <cite>.compute_smooth_routes()</cite>.
During <cite>.compute_routes()</cite> the paths are appended to the object as an entry <cite>paths</cite>, which are replaced by the
smoothed paths after running <cite>.compute_smooth_routes()</cite>. An additional entry <cite>waypoints</cite> is generated to give the
waypoints information used in route construction. For further info about the structure of the outputs of the
paths please see the Outputs section of the manual.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">polar_route.route_planner</span> <span class="kn">import</span> <span class="n">RoutePlanner</span>
<span class="n">rp</span> <span class="o">=</span> <span class="n">RoutePlanner</span><span class="p">(</span><span class="n">vessel_mesh</span><span class="p">,</span> <span class="n">route_config</span> <span class="p">,</span> <span class="n">waypoints</span><span class="p">)</span>
<span class="n">rp</span><span class="o">.</span><span class="n">compute_routes</span><span class="p">()</span>
<span class="n">rp</span><span class="o">.</span><span class="n">compute_smoothed_routes</span><span class="p">()</span>
<span class="n">info</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Installation.html" class="btn btn-neutral float-left" title="2. Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Configuration.html" class="btn btn-neutral float-right" title="4. Input - Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, BAS AI Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>