<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>7.4.1.1. Abstract Vector Dataloader &mdash; polar_route 0.3.1 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="7.4.3.1. Baltic Currents Dataloader" href="implemented/BalticCurrent.html" />
    <link rel="prev" title="7.4. Vector Dataloaders" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            polar_route
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Code_overview.html">1. Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ipython_notebooks.html">3. Python &amp; iPython Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Command_line_interface.html">4. Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Configuration/Configuration_overview.html">5. Configuration Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Outputs.html">6. Outputs - Data Types</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../overview.html">7. Dataloader Overview</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../DataLoaderInterface.html">7.1. Dataloader Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Factory.html">7.2. Dataloader Factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scalar/index.html">7.3. Scalar Dataloaders</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">7.4. Vector Dataloaders</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html#abstract-vector-base-class">7.4.1. Abstract Vector Base Class</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">7.4.1.1. Abstract Vector Dataloader</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#vector-dataloader-examples">7.4.2. Vector Dataloader Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#implemented-vector-dataloaders">7.4.3. Implemented Vector Dataloaders</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../AddingDataloaders.html">7.5. Adding New Dataloaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview.html#section-overview">7.6. Section Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Mesh_Construction/Mesh_construction_overview.html">8. Methods - Mesh Construction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Vehicle_specifics.html">9. Methods - Vessel Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Route_calculation.html">10. Methods - Route Calculation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Route_optimisation.html">11. Methods - Route Planner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Examples.html">12. Examples of running code</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">polar_route</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../overview.html"><span class="section-number">7. </span>Dataloader Overview</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">7.4. </span>Vector Dataloaders</a></li>
      <li class="breadcrumb-item active"><span class="section-number">7.4.1.1. </span>Abstract Vector Dataloader</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/sections/Dataloaders/vector/abstractVector.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-polar_route.dataloaders.vector.abstract_vector">
<span id="id1"></span><span id="abstract-vector-dataloader"></span><h1><span class="section-number">7.4.1.1. </span>Abstract Vector Dataloader<a class="headerlink" href="#module-polar_route.dataloaders.vector.abstract_vector" title="Permalink to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">polar_route.dataloaders.vector.abstract_vector.</span></span><span class="sig-name descname"><span class="pre">VectorDataLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader" title="Permalink to this definition"></a></dt>
<dd><p>Abstract class for all vector Datasets.</p>
<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.__init__" title="Permalink to this definition"></a></dt>
<dd><p>This is where large-scale operations are performed,
such as importing data, downsampling, reprojecting, and renaming
variables</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bounds</strong> (<em>Boundary</em>) – Initial mesh boundary to limit scope of data ingest</p></li>
<li><p><strong>params</strong> (<em>dict</em>) – Values needed by dataloader to initialise. Unique to each
dataloader</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.self.data">
<span class="sig-prename descclassname"><span class="pre">self.</span></span><span class="sig-name descname"><span class="pre">data</span></span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.self.data" title="Permalink to this definition"></a></dt>
<dd><p>Data stored by dataloader to use when called upon by the mesh.
Must be saved in mercator projection (EPSG:4326), with
coordinates names ‘lat’, ‘long’, and ‘time’ (if applicable).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame or xr.Dataset</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.self.data_name">
<span class="sig-prename descclassname"><span class="pre">self.</span></span><span class="sig-name descname"><span class="pre">data_name</span></span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.self.data_name" title="Permalink to this definition"></a></dt>
<dd><p>Name of scalar variable. Must be the column name if self.data
is pd.DataFrame. Must be variable if self.data is xr.Dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.add_default_params">
<span class="sig-name descname"><span class="pre">add_default_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.add_default_params" title="Permalink to this definition"></a></dt>
<dd><p>Set default values for all scalar dataloaders. This function should be
overloaded to include any extra params for a specific dataloader</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of dataloader entry in dataloader_requirements. Used to
specify default parameters for a specific dataloader.</p></li>
<li><p><strong>params</strong> (<em>dict</em>) – Dictionary containing attributes that are required for each
dataloader.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary of attributes the dataloader will require,
completed with default values if not provided in config.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>(dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.add_mag_dir">
<span class="sig-name descname"><span class="pre">add_mag_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.add_mag_dir" title="Permalink to this definition"></a></dt>
<dd><p>Adds magnitude and direction variables/columns to data for easier
retrieval of value</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pd.DataFrame</em><em> or </em><em>xr.Dataset</em>) – Data with ‘lat’ and ‘long’ columns/dimensions. Assumes that the
existing data is in cartesian form (x and y components).
If None, will use self.data</p></li>
<li><p><strong>data_names</strong> (<em>list</em>) – List of data columns/variables to use in calculation
If None, will use self.data_name_list</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Original dataset with two new columns/variables called
‘_magnitude’ and ‘_direction’, containing the corresponding
values for each.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>data (pd.DataFrame or xr.Dataset)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.calc_curl">
<span class="sig-name descname"><span class="pre">calc_curl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collapse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agg_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'MAX'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.calc_curl" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the curl of vectors in a cellbox</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bounds</strong> (<em>Boundary</em>) – Cellbox boundary in which all relevant vectors are contained</p></li>
<li><p><strong>data</strong> (<em>pd.DataFrame</em><em> or </em><em>xr.Dataset</em>) – Dataset with ‘lat’ and ‘long’ columns/dimensions with vectors</p></li>
<li><p><strong>collapes</strong> (<em>bool</em>) – Flag determining whether to return an aggregated value, or a
vector field (values for each individual vector).</p></li>
<li><p><strong>agg_type</strong> (<em>str</em>) – Method of aggregation if collapsing value.
Accepts ‘MAX’ or ‘MEAN’</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>float value of aggregated curl if collapse=True, or
pd.DataFrame of curl vector field if collapse=False</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or pd.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If agg_type is not ‘MAX’ or ‘MEAN’</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.calc_divergence">
<span class="sig-name descname"><span class="pre">calc_divergence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collapse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agg_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'MAX'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.calc_divergence" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the divergence of vectors in a cellbox</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bounds</strong> (<em>Boundary</em>) – Cellbox boundary in which all relevant vectors are contained</p></li>
<li><p><strong>data</strong> (<em>pd.DataFrame</em><em> or </em><em>xr.Dataset</em>) – Dataset with ‘lat’ and ‘long’ columns/dimensions with vectors</p></li>
<li><p><strong>collapes</strong> (<em>bool</em>) – Flag determining whether to return an aggregated value, or a
vector field (values for each individual vector).</p></li>
<li><p><strong>agg_type</strong> (<em>str</em>) – Method of aggregation if collapsing value.
Accepts ‘MAX’ or ‘MEAN’</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>float value of aggregated div if collapse=True, or
pd.DataFrame of div vector field if collapse=False</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or pd.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If agg_type is not ‘MAX’ or ‘MEAN’</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.calc_dmag">
<span class="sig-name descname"><span class="pre">calc_dmag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collapse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agg_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'MEAN'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.calc_dmag" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the dmag of vectors in a cellbox.
dmag is defined as being the difference in magnitudes between
each vector and the average vector within the bounds.</p>
<p>dmag = mag(vector - mean_vector)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bounds</strong> (<em>Boundary</em>) – Cellbox boundary in which all relevant vectors are contained</p></li>
<li><p><strong>data</strong> (<em>pd.DataFrame</em><em> or </em><em>xr.Dataset</em>) – Dataset with ‘lat’ and ‘long’ columns/dimensions with vectors</p></li>
<li><p><strong>collapes</strong> (<em>bool</em>) – Flag determining whether to return an aggregated value, or a
vector field (values for each individual vector).</p></li>
<li><p><strong>agg_type</strong> (<em>str</em>) – Method of aggregation if collapsing value.
Accepts ‘MAX’ or ‘MEAN’</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>float value of aggregated dmag if collapse=True, or
pd.DataFrame of dmag vector field if collapse=False</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or pd.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If agg_type is not ‘MAX’ or ‘MEAN’</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.calc_reynolds_number">
<span class="sig-name descname"><span class="pre">calc_reynolds_number</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bounds</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.calc_reynolds_number" title="Permalink to this definition"></a></dt>
<dd><p>Calculates an approximate Reynolds number from the mean vector velocity
and cellbox size.</p>
<p>CURRENTLY ASSUMES DENSITY AND VISCOSITY OF SEAWATER AT 4°C!
WILL NEED MINOR REWORKING TO INCLUDE DIFFERENT FLUIDS</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bounds</strong> (<em>Boundary</em>) – Cellbox boundary to calculate characteristic length from</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Reynolds number of cellbox</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.calculate_coverage">
<span class="sig-name descname"><span class="pre">calculate_coverage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.calculate_coverage" title="Permalink to this definition"></a></dt>
<dd><p>Calculates percentage of boundary covered by dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bounds</strong> (<em>Boundary</em>) – Boundary being compared against</p></li>
<li><p><strong>data</strong> (<em>pd.DataFrame</em><em> or </em><em>xr.Dataset</em>) – Dataset with ‘lat’ and ‘long’ coordinates.
Extent calculated from min/max of these coordinates.
Defaults to objects internal dataset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Decimal fraction of boundary covered by the dataset</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.downsample">
<span class="sig-name descname"><span class="pre">downsample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agg_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.downsample" title="Permalink to this definition"></a></dt>
<dd><p>Downsamples imported data to be more easily manipulated. Data size
should be reduced by a factor of m*n, where (m,n) are the
downsample_factors defined in the params.
self.data can be pd.DataFrame or xr.Dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>agg_type</strong> (<em>str</em>) – Method of aggregation to bin data by to downsample. Default is
same method used for homogeneity condition.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Downsampled data</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>xr.Dataset or pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.get_data_col_name">
<span class="sig-name descname"><span class="pre">get_data_col_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.get_data_col_name" title="Permalink to this definition"></a></dt>
<dd><p>Retrieve name of data column (for pd.DataFrame), or variable
(for xr.Dataset). Used for when data_name not defined in params.
Variable names are appended and comma seperated</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Name of data columns, comma seperated</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.get_data_col_name_list">
<span class="sig-name descname"><span class="pre">get_data_col_name_list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.get_data_col_name_list" title="Permalink to this definition"></a></dt>
<dd><p>Retrieve names of data columns (for pd.DataFrame), or variable
(for xr.Dataset). Used for when data_name not defined in params.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Contains strings of data namesk</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.get_dp_from_coord">
<span class="sig-name descname"><span class="pre">get_dp_from_coord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">long</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_coords</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.get_dp_from_coord" title="Permalink to this definition"></a></dt>
<dd><p>Extracts datapoint from self.data with lat and long specified in kwargs.
self.data can be pd.DataFrame or xr.Dataset. Will return multiple values
if one set of coordinates have multiple entries (e.g. time series data)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>long</strong> (<em>float</em>) – Longitude coordinate to search for</p></li>
<li><p><strong>lat</strong> (<em>float</em>) – Latitude coordinate to search for</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Column of data values with chosen lat/long. Could be many
datapoints because either bad data or multiple time steps</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.Dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.get_hom_condition">
<span class="sig-name descname"><span class="pre">get_hom_condition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">splitting_conds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agg_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'MEAN'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.get_hom_condition" title="Permalink to this definition"></a></dt>
<dd><p>Retrieves homogeneity condition of data within boundary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bounds</strong> (<em>Boundary</em>) – Boundary object with limits of datarange to analyse</p></li>
<li><p><strong>splitting_conds</strong> (<em>dict</em>) – <p>Containing the following keys:</p>
<dl class="simple">
<dt>’threshold’:</dt><dd><p><cite>(float)</cite> The threshold at which data points of
type ‘value’ within this CellBox are checked to be either
above or below</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>The homogeniety condtion returned is of the form:</p>
<p>’MIN’ = the cellbox contains less than a minimum number of
data points</p>
<p>’HET’ = Threshold values defined in config are exceeded</p>
<p>’CLR’ = None of the HET conditions were triggered</p>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.get_value">
<span class="sig-name descname"><span class="pre">get_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agg_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipna</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.get_value" title="Permalink to this definition"></a></dt>
<dd><p>Retrieve aggregated value from within bounds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>aggregation_type</strong> (<em>str</em>) – Method of aggregation of datapoints within
bounds. Can be upper or lower case.
Accepts ‘MIN’, ‘MAX’, ‘MEAN’, ‘MEDIAN’, ‘STD’, ‘COUNT’</p></li>
<li><p><strong>bounds</strong> (<em>Boundary</em>) – Boundary object with limits of lat/long</p></li>
<li><p><strong>skipna</strong> (<em>bool</em>) – Defines whether to propogate NaN’s or not
Default = True (ignore’s NaN’s)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>{variable (str): aggregated_value (float)}
Aggregated value within bounds following aggregation_type</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – aggregation type not in list of available methods</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.import_data">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">import_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bounds</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.import_data" title="Permalink to this definition"></a></dt>
<dd><p>User defined method for importing data from files, or even generating
data from scratch</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>Coordinates and data being imported from file</p>
<dl class="simple">
<dt>if xr.Dataset,</dt><dd><ul class="simple">
<li><p>Must have coordinates ‘lat’ and ‘long’</p></li>
<li><p>Should have multiple data variables</p></li>
</ul>
</dd>
<dt>if pd.DataFrame,</dt><dd><ul class="simple">
<li><p>Must have columns ‘lat’ and ‘long’</p></li>
<li><p>Should have multiple data columns</p></li>
</ul>
</dd>
</dl>
<p>Downsampling and reprojecting happen in __init__() method</p>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>xr.Dataset or pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.reproject">
<span class="sig-name descname"><span class="pre">reproject</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_proj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'EPSG:4326'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_proj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'EPSG:4326'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lat'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'long'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.reproject" title="Permalink to this definition"></a></dt>
<dd><p>Reprojects data using pyProj.Transformer
self.data can be pd.DataFrame or xr.Dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>in_proj</strong> (<em>str</em>) – Projection that the imported dataset is in
Must be allowed by PyProj.CRS (Coordinate Reference System)</p></li>
<li><p><strong>out_proj</strong> (<em>str</em>) – Projection required for final data output
Must be allowed by PyProj.CRS (Coordinate Reference System)
Shouldn’t change from default value (EPSG:4326)</p></li>
<li><p><strong>x_col</strong> (<em>str</em>) – Name of coordinate column 1</p></li>
<li><p><strong>y_col</strong> (<em>str</em>) – Name of coordinate column 2
x_col and y_col will be cast into lat and long by the
reprojection</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Reprojected data with ‘lat’, ‘long’ columns
replacing ‘x_col’ and ‘y_col’</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.set_data_col_name">
<span class="sig-name descname"><span class="pre">set_data_col_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.set_data_col_name" title="Permalink to this definition"></a></dt>
<dd><p>Sets name of data column/data variables from a comma-seperated string</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name_dict</strong> (<em>dict</em>) – Dictionary mapping old variable names to new variable names,
of the form {old_name (str): new_name (str)}</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Data with variable name changed</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>xr.Dataset or pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.set_data_col_name_list">
<span class="sig-name descname"><span class="pre">set_data_col_name_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.set_data_col_name_list" title="Permalink to this definition"></a></dt>
<dd><p>Sets name of data column/data variables from a list of strings.
Also updates self.data_name_list with new names from list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>new_names</strong> (<em>list</em>) – List of strings containing new variable names</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Original dataset with data variables renamed</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame or xr.Dataset</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.trim_datapoints">
<span class="sig-name descname"><span class="pre">trim_datapoints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#polar_route.dataloaders.vector.abstract_vector.VectorDataLoader.trim_datapoints" title="Permalink to this definition"></a></dt>
<dd><p>Trims datapoints from self.data within boundary defined by ‘bounds’.
self.data can be pd.DataFrame or xr.Dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bounds</strong> (<em>Boundary</em>) – Limits of lat/long/time to select data from</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Trimmed dataset in same format as self.data</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame or xr.Dataset</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="7.4. Vector Dataloaders" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="implemented/BalticCurrent.html" class="btn btn-neutral float-right" title="7.4.3.1. Baltic Currents Dataloader" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2023, BAS AI Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>